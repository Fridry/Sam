<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Wizard</title>
    </h:head>

    <h:body>
        <h:form>

            <p:growl id="growl" sticky="true" showDetail="true"/>

            <p:wizard flowListener="#{pessoaBean.onFlowProcess}">
                <p:tab id="personal" title="Paciente">
                    <p:panel header="Personal Details">
                        <p:messages />
                        <h:panelGrid columns="2" columnClasses="label, value">
                            <p:outputLabel for="idUsuario" value="Usuário: " />
                            <p:selectOneMenu id="idUsuario" value="#{agendamentoBean.agendamento.pessoa}" filter="true" converter="pessoaConverter">
                                <f:selectItem itemLabel="Selecione o usuário" noSelectionOption="true" />
                                <f:selectItems value="#{agendamentoBean.pessoas}" var="pessoa"
                                               itemValue="#{pessoa}" itemLabel="#{pessoa.nome} - #{pessoa.numSus}"/>
                            </p:selectOneMenu>

                            <p:outputLabel for="idLocal" value="Local:" />
                            <p:selectOneMenu id="idLocal" value="#{agendamentoBean.agendamento.local}" filter="true" converter="localConverter">
                                <f:selectItem itemLabel="Selecione o Local" noSelectionOption="true" />
                                <f:selectItems value="#{agendamentoBean.locais}" var="local"
                                               itemValue="#{local}" itemLabel="#{local.nomeLocal}"/>
                            </p:selectOneMenu>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="contact" title="Contato">
                    <p:panel header="Contact Information">
                        <p:messages />
                        <h:panelGrid columns="2" columnClasses="label, value">
                            <p:outputLabel for="idEspecialidade" value="Especialidade:" />
                            <p:selectOneMenu id="idEspecialidade" value="#{agendamentoBean.agendamento.especialidade}" filter="true" converter="especialidadeConverter">
                                <f:selectItem itemLabel="Selecione a especialidade" noSelectionOption="true" />
                                <f:selectItems value="#{agendamentoBean.especialidades}" var="especialidade"
                                               itemValue="#{especialidade}" itemLabel="#{especialidade.tipoEspecialidade}"/>
                            </p:selectOneMenu>

                            <p:outputLabel for="idDataEvento" value="Data: " />
                            <p:calendar id="idDataEvento" value="#{agendamentoBean.agendamento.data}" navigator="true" pattern="dd/MM/yyyy"/>
                            <p:commandButton value="Ver horários disponíveis" update="growl" process="@this"/>
                            <p:commandButton value="Ver horários disponíveis" update="growl" process="@this"/>

                            <p:outputLabel for="idHora" value="Horário:" />
                            <p:selectOneMenu id="idHora" value="#{agendamentoBean.agendamento.horario}" filter="true" converter="horarioConverter">
                                <f:selectItem itemLabel="Selecione o Horário" noSelectionOption="true" />
                                <f:selectItems value="#{agendamentoBean.horarios}" var="horario"
                                               itemValue="#{horario}" itemLabel="#{horario.hora}"/>
                            </p:selectOneMenu>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>
      

                <p:tab id="Outro" title="Confirmação">
                    <p:panel header="Confirmation">
                        <h:panelGrid id="confirmation" columns="3" columnClasses="grid,grid,grid">
                            <h:panelGrid columns="2" columnClasses="label, value">
                                <h:outputText value="Nome: " />
                                <h:outputText value="#{agendamentoBean.agendamento.pessoa.nome}" styleClass="outputLabel"/>

                                <h:outputText value="Local: " />
                                <h:outputText value="#{agendamentoBean.agendamento.local.nomeLocal}" styleClass="outputLabel"/>

                                <h:outputText value="Especialidade: " />
                                <h:outputText value="#{agendamentoBean.agendamento.especialidade.tipoEspecialidade}" styleClass="outputLabel"/>

                                <h:outputText value="Data: " />
                                <h:outputText value="#{agendamentoBean.agendamento.data}" styleClass="outputLabel">
                                    <f:convertDateTime pattern="MM/dd/yyyy" />
                                </h:outputText>

                                <h:outputText value="Hora: " />
                                <h:outputText value="#{agendamentoBean.agendamento.horario.hora}" styleClass="outputLabel"/>

                            </h:panelGrid>

                        </h:panelGrid>

                        <p:commandButton value="Submit" action="#{agendamentoBean.fundirAgendamento()}" update="growl" process="@this"/>
                    </p:panel>
                </p:tab>
            </p:wizard>

        </h:form>
    </h:body>
</html>